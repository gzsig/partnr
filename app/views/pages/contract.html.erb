<h3>Contract of <%= @good.brand %> <%= @good.model %></h3>
<div id='container'></div>

<% content_for :after_js do %>
  <script>
    // Carrega o widget embedded com a request_signature_key
    widget = new Clicksign("<%= @good.partners.where(user: current_user).first.request_signature_key %>");


    // Define o endpoint https://sandbox.clicksign.com ou https://app.clicksign.com
    widget.endpoint = 'https://sandbox.clicksign.com';

    // Define a URL de origem (parametro necessário para utilizar através de WebView)
    widget.origin = 'http://localhost:3000';
    // widget.origin = 'https://partnr.me';

    // Monta o widget no div
    widget.mount('container');

    widget.on('loaded', function(ev) { console.log('loaded!'); });
    widget.on('signed', function(ev) { console.log('signed!'); });

  </script>
<% end %>
